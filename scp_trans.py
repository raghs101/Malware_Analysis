import paramiko

class scp_tra:
    def __init__(self,file_path):
        self.file_path = file_path
    def transfer(self):
        ssh = paramiko.SSHClient()
        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

        

        ssh.connect("192.168.56.103", port=22, username="remnux", password="malware")

                
        scp = ssh.open_sftp()
        a = self.file_path.split('/')
        
        
        
        
        scp.put(f"{self.file_path}",f"/home/remnux/{a[-1]}")
        scp.close()
        ssh.close()


class ssh_trans:
    def __init__(self,file_path):
        self.file_path = file_path
        ssh = paramiko.SSHClient()
        ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        a = self.file_path.split('/')

        

        ssh.connect("192.168.56.103", port=22, username="remnux", password="malware")
        command = "chmod +x reme_exe.sh"
        command1 = f"./reme_exe.sh {a[-1]}"
        stdin, stdout, stderr = ssh.exec_command(command)
        stdin, stdout, stderr = ssh.exec_command(command1)
        # stdin.write("malware" + "/n")
        # stdin.flush()
        # a = stdout.read().decode()
        
        ssh.close()

cs = scp_tra("static/op1")
cs.transfer()
ssh_trans("static/op1")


